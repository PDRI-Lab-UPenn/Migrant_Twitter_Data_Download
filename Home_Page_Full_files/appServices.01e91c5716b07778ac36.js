(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{356:function(e,r,n){"use strict";n.r(r),n.d(r,"AppServices",(function(){return s}));n(30),n(9),n(8),n(20),n(11),n(12),n(103);var t=n(99),a=n(17);function i(e,r,n,t,a,i,c){try{var u=e[i](c),o=u.value}catch(e){return void n(e)}u.done?r(o):Promise.resolve(o).then(t,a)}function c(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var c=e.apply(r,n);function u(e){i(c,t,a,u,o,"next",e)}function o(e){i(c,t,a,u,o,"throw",e)}u(void 0)}))}}function u(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var s=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"abtestManager",void 0),o(this,"analyticsHandler",void 0),o(this,"appConfig",void 0),o(this,"appRootController",void 0),o(this,"archiveItSearchHandler",void 0),o(this,"browserHistoryHandler",void 0),o(this,"configService",void 0),o(this,"collectionNameCache",void 0),o(this,"forumService",void 0),o(this,"geoCountService",void 0),o(this,"histogramDataService",void 0),o(this,"featureFeedbackService",void 0),o(this,"fetchHandler",void 0),o(this,"keyValueStoreManager",void 0),o(this,"lazyLoaderService",void 0),o(this,"lightDOMTunnel",void 0),o(this,"localCache",void 0),o(this,"localizationManager",void 0),o(this,"metadataService",void 0),o(this,"modalManager",void 0),o(this,"pageMetadataService",void 0),o(this,"psaBannerService",void 0),o(this,"radioSearchHandler",void 0),o(this,"recaptchaManager",void 0),o(this,"resizeObserver",void 0),o(this,"searchService",void 0),o(this,"themeManager",void 0),o(this,"tvSearchHandler",void 0),o(this,"userService",void 0),o(this,"waybackSearchHandler",void 0),o(this,"wikipediaAPIService",void 0),o(this,"mediaCountService",void 0),this.abtestManager=r.abtestManager,this.analyticsHandler=r.analyticsHandler,this.appConfig=r.appConfig,this.appRootController=r.appRootController,this.archiveItSearchHandler=r.archiveItSearchHandler,this.browserHistoryHandler=r.browserHistoryHandler,this.collectionNameCache=r.collectionNameCache,this.configService=r.configService,this.forumService=r.forumService,this.geoCountService=r.geoCountService,this.histogramDataService=r.histogramDataService,this.featureFeedbackService=r.featureFeedbackService,this.fetchHandler=r.fetchHandler,this.keyValueStoreManager=r.keyValueStoreManager,this.lazyLoaderService=r.lazyLoaderService,this.lightDOMTunnel=r.lightDOMTunnel,this.localCache=r.localCache,this.localizationManager=r.localizationManager,this.metadataService=r.metadataService,this.modalManager=r.modalManager,this.pageMetadataService=r.pageMetadataService,this.psaBannerService=r.psaBannerService,this.radioSearchHandler=r.radioSearchHandler,this.recaptchaManager=r.recaptchaManager,this.resizeObserver=r.resizeObserver,this.searchService=r.searchService,this.themeManager=r.themeManager,this.tvSearchHandler=r.tvSearchHandler,this.userService=r.userService,this.waybackSearchHandler=r.waybackSearchHandler,this.wikipediaAPIService=r.wikipediaAPIService,this.mediaCountService=r.mediaCountService}var r,i,s;return r=e,s=[{key:"generateAppServices",value:function(r){var i,u,o,s,l,p,h,f,v,d,g,w,m,b,S,x,R,y,k,C,O,M,H,j,P,z,A,L,U,I,D=new t.a({generator:(i=c(regeneratorRuntime.mark((function e(){var t,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.resolve().then(n.bind(null,154))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,c=!i.isPrerendering,u=new t.AnalyticsHandler({enableAnalytics:c}),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}),F=new t.a({generator:(u=c(regeneratorRuntime.mark((function e(){var t,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(0).then(n.bind(null,249))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,c=new t.DefaultMetadataBackend({baseUrl:i.archiveApiUrl,includeCredentials:!0}),u=new t.MetadataService(c),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})}),T=new t.a({generator:(o=c(regeneratorRuntime.mark((function e(){var t,i,c,u,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(0).then(n.bind(null,232))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,c=new URL(window.location.href).searchParams,u=c.get("tester"),o=c.get("debugging"),s=u&&/^[A-Za-z0-9]+$/.test(u),l=new t.SearchService({baseUrl:s?"www-".concat(u,".archive.org"):i.archiveApiUrl,includeCredentials:!0,debuggingEnabled:null!==o}),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}),B=new t.a({generator:(s=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(33).then(n.bind(null,326))}));case 2:return r=e.sent,e.abrupt("return",r.PageMetadataService.default);case 4:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})}),V=new t.a({generator:(l=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(19).then(n.bind(null,327))}));case 2:return r=e.sent,e.abrupt("return",new r.ForumService);case 4:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})}),E=new t.a({generator:(p=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,354))}));case 2:return r=e.sent,e.abrupt("return",new r.GeoCountService);case 4:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})}),N=new t.a({generator:(h=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,328))}));case 2:return r=e.sent,e.abrupt("return",new r.HistogramDataService);case 4:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)})}),K=new t.a({generator:(f=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(18).then(n.bind(null,355))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.abrupt("return",new t.FetchHandler({iaApiBaseUrl:"https://".concat(i.archiveApiUrl)}));case 7:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)})}),J=new t.a({generator:(v=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(27)]).then(n.bind(null,329))}));case 2:return r=e.sent,(t=new r.LazyLoaderService).on("scriptLoadRetried",function(){var e=c(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get();case 2:e.sent.sendEvent({category:"offshootLazyLoaderService",action:"scriptRetry: ".concat(n),label:r});case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}()),t.on("scriptLoadFailed",function(){var e=c(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get();case 2:e.sent.sendEvent({category:"offshootLazyLoaderService",action:"scriptLoadFailed",label:r});case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)})}),W=new t.a({generator:(d=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ResizeObserver"in window!=0){e.next=9;break}return e.next=3,Object(a.a)((function(){return Promise.all([n.e(0),n.e(37)]).then(n.bind(null,330))}));case 3:return r=e.sent,window.ResizeObserver=r.ResizeObserver,e.next=7,D.get();case 7:e.sent.sendEvent({category:"offshootPolyfills",action:"loadResizeObserver",label:navigator.userAgent});case 9:return e.next=11,Object(a.a)((function(){return n.e(40).then(n.bind(null,331))}));case 11:return t=e.sent,e.abrupt("return",new t.SharedResizeObserver);case 13:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})}),q=new t.a({generator:(g=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.history);case 1:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)})}),G=new t.a({generator:(w=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(3).then(n.bind(null,332))}));case 2:return t=e.sent,e.abrupt("return",new t.AppRootController(r.appRoot));case 4:case"end":return e.stop()}}),e)}))),function(){return w.apply(this,arguments)})}),Z=new t.a({generator:(m=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(26)]).then(n.bind(null,351))}));case 2:return r=e.sent,e.abrupt("return",new r.KeyValueStoreManager);case 4:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})}),$=new t.a({generator:(b=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(43)]).then(n.bind(null,333))}));case 2:return r=e.sent,e.abrupt("return",new r.ThemeManager({keyValueStoreManager:Z}));case 4:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)})}),Q=new t.a({generator:(S=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(0).then(n.bind(null,301))}));case 2:return r=e.sent,e.next=5,Z.get();case 5:return t=e.sent,e.abrupt("return",new r.LocalizationManager({keyValueStoreManager:t}));case 7:case"end":return e.stop()}}),e)}))),function(){return S.apply(this,arguments)})}),X=new t.a({generator:(x=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(29)]).then(n.bind(null,334))}));case 2:return r=e.sent,e.abrupt("return",new r.LocalCache);case 4:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)})}),Y=new t.a({generator:(R=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(46)]).then(n.bind(null,335))}));case 2:return r=e.sent,e.next=5,X.get();case 5:return t=e.sent,e.abrupt("return",new r.UserService({cache:t}));case 7:case"end":return e.stop()}}),e)}))),function(){return R.apply(this,arguments)})}),_=new t.a({generator:(y=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(28).then(n.bind(null,336))}));case 2:return r=e.sent,t=document.querySelector("app-root"),e.abrupt("return",new r.LightDOMTunnel(t));case 5:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)})}),ee=new t.a({generator:(k=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(47).then(n.bind(null,337))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.abrupt("return",new t.WaybackSearchHandler(i.waybackSearchUrl));case 7:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)})}),re=new t.a({generator:(C=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(44).then(n.bind(null,338))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.abrupt("return",new t.TvSearchHandler(i.tvSearchUrl));case 7:case"end":return e.stop()}}),e)}))),function(){return C.apply(this,arguments)})}),ne=new t.a({generator:(O=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(35).then(n.bind(null,339))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.abrupt("return",new t.RadioSearchHandler(i.radioSearchUrl));case 7:case"end":return e.stop()}}),e)}))),function(){return O.apply(this,arguments)})}),te=new t.a({generator:(M=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(5).then(n.bind(null,340))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.abrupt("return",new t.ArchiveItSearchHandler({baseCollectionUrl:i.archiveItCollectionSearchUrl,basePartnerUrl:i.archiveItPartnerSearchUrl}));case 7:case"end":return e.stop()}}),e)}))),function(){return M.apply(this,arguments)})}),ae=new t.a({generator:(H=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(9).then(n.bind(null,341))}));case 2:return r=e.sent,e.next=5,K.get();case 5:return t=e.sent,e.abrupt("return",new r.ConfigService({fetchHandler:t}));case 7:case"end":return e.stop()}}),e)}))),function(){return H.apply(this,arguments)})}),ie=new t.a({generator:(j=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(1).then(n.bind(null,342))}));case 2:return r=e.sent,e.next=5,K.get();case 5:return t=e.sent,e.abrupt("return",new r.ABTestManager(t));case 7:case"end":return e.stop()}}),e)}))),function(){return j.apply(this,arguments)})}),ce=new t.a({generator:(P=c(regeneratorRuntime.mark((function e(){var t,i,c,u,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(6).then(n.bind(null,343))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.next=8,F.get();case 8:return c=e.sent,e.next=11,X.get();case 11:return u=e.sent,o=i.environment,e.abrupt("return",new t.PSABannerService({metadataService:c,environment:o,localCache:u}));case 14:case"end":return e.stop()}}),e)}))),function(){return P.apply(this,arguments)})}),ue=new t.a({generator:(z=c(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(31).then(n.bind(null,344))}));case 2:return r=e.sent,e.next=5,K.get();case 5:return t=e.sent,e.abrupt("return",new r.MediaCountService(t));case 7:case"end":return e.stop()}}),e)}))),function(){return z.apply(this,arguments)})}),oe=new t.a({generator:(A=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(0).then(n.bind(null,300))}));case 2:return r=e.sent,e.abrupt("return",new r.WikipediaAPIService);case 4:case"end":return e.stop()}}),e)}))),function(){return A.apply(this,arguments)})}),se=new t.a({generator:(L=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(0).then(n.bind(null,246))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.abrupt("return",new t.FeatureFeedbackService({serviceUrl:i.featureFeedback.serviceUrl}));case 7:case"end":return e.stop()}}),e)}))),function(){return L.apply(this,arguments)})}),le=new t.a({generator:(U=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return Promise.all([n.e(0),n.e(36)]).then(n.bind(null,345))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return i=e.sent,e.abrupt("return",new t.RecaptchaManager({defaultSiteKey:i.recaptchaSiteKey}));case 7:case"end":return e.stop()}}),e)}))),function(){return U.apply(this,arguments)})}),pe=new t.a({generator:(I=c(regeneratorRuntime.mark((function e(){var t,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)((function(){return n.e(0).then(n.bind(null,294))}));case 2:return t=e.sent,e.next=5,r.appConfig.get();case 5:return e.sent,e.next=8,T.get();case 8:return i=e.sent,e.next=11,X.get();case 11:return c=e.sent,e.abrupt("return",new t.CollectionNameCache({searchService:i,localCache:c}));case 13:case"end":return e.stop()}}),e)}))),function(){return I.apply(this,arguments)})});return new e({abtestManager:ie,analyticsHandler:D,appConfig:r.appConfig,appRootController:G,archiveItSearchHandler:te,browserHistoryHandler:q,collectionNameCache:pe,configService:ae,forumService:V,geoCountService:E,histogramDataService:N,featureFeedbackService:se,fetchHandler:K,keyValueStoreManager:Z,lazyLoaderService:J,lightDOMTunnel:_,localCache:X,localizationManager:Q,metadataService:F,modalManager:r.modalManager,pageMetadataService:B,psaBannerService:ce,radioSearchHandler:ne,recaptchaManager:le,resizeObserver:W,searchService:T,themeManager:$,tvSearchHandler:re,userService:Y,waybackSearchHandler:ee,wikipediaAPIService:oe,mediaCountService:ue})}}],(i=null)&&u(r.prototype,i),s&&u(r,s),e}()}}]);
//# sourceMappingURL=appServices.01e91c5716b07778ac36.js.map